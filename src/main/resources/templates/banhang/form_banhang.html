<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quản lý kế toán</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/fragment.css}">
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/css/banhang/form_chungtuban.css}">
    <script th:src="@{/js/banhang.js}"></script>
    <script th:src="@{/js/fragment.js}"></script>
</head>
<body>
    <div class="wrapper">
        <div th:replace="fragments::sidebar"></div>
	    <div class="main_content">
	        <div th:replace="fragments::header_Signined"></div>
	        <div class="info">
	        	<div class="row t1">
                    <h2>Chứng từ bán hàng</h2>
                    <form th:action="@{/getDonBanHang}" method="get">
		        		<label for="sodonhang">Số đơn hàng:</label>
		        		<input type="text" name="sodonban" placeholder="Số đơn bán hàng"/>
		        		<button class="btn btn-download">
		        			<i class="fa fa-download"></i>
		        		</button>
		        	</form>
                </div>
                <div>
                	<div th:if="${message1}" style="font-size:16px;color:red;">
					    <div th:text="${message1}"></div>
					</div>
                </div>
                <form th:action="@{/chungtuban_add}" method="post" th:object="${chungtuban}">
                <div class="row t2">
                    <input type="radio" id="chuathanhtoan" name="thanhtoan" value="chuathanhtoan" th:field="*{thanhToan}">
                    <label for="chuathanhtoan">Chưa thanh toán</label>
                    <input type="radio" id="thanhtoanngay" name="thanhtoan" value="thanhtoanngay" th:field="*{thanhToan}">
                    <label for="thanhtoanngay">Thanh toán ngay</label>
                    <input type="text" id="phuongthuc" value="Tiền mặt" disabled>
                    <label for="hoadon">Hóa đơn:</label>
                    <select id="select_hoadon" th:field="*{nhanKemHoaDon}">                       
                        <option value="nhankem">Nhận kèm hóa đơn</option>
                        <option value="khongkem">Không nhận kèm</option>
                    </select>
                    <label for="kemphieuxuat">Phiếu xuất</label>
                    <input type="checkbox" id="kemphieuxuat" name="kemphieuxuat" value="co" th:field="*{kemphieuxuat}">
                </div>
                <div class="row t3">
                    <div class="col-sm-7">
                      <ul class="nav nav-tabs">
                        <li><a data-toggle="tab" href="#tab_chungtughino">Chứng từ bán</a></li>
                        <li class="active"><a data-toggle="tab" href="#tab_phieuxuat">Phiếu xuất</a></li>
                        <li><a data-toggle="tab" href="#tab_phieuthu">Phiếu thu</a></li>
                        <li><a data-toggle="tab" href="#tab_hoadon">Hóa Đơn</a></li>
                     </ul>
                      <div class="tab-content">
                        <div id="tab_chungtughino" class="tab-pane fade">
                          <table>
                          	<tr>
                          		<td>
                          			<label for="makh">Mã khách hàng:</label>
                          		</td>
                          		<td>
                          			<input type="text" name="makh" th:field="*{maDoiTuong}"/>
                          		</td>
                          	</tr>
                          	<tr>
                          		<td>
                          			<label for="tenkh">Tên khách hàng:</label>
                          		</td>
                          		<td>
                          			<input type="text" name="tenkh" th:field="*{tenDoiTuong}"/>
                          		</td>
                          	</tr>
                          	<tr>
                          		<td>
                          			<label for="diaChi">Địa chỉ:</label>
                          		</td>
                          		<td>
                          			<input type="text" name="diaChi" th:field="*{diaChi}"/>
                          		</td>
                          	</tr>
                          	<tr>
                          		<td>
                          			<label for="diengiai">Diễn giải:</label>
                          		</td>
                          		<td>
                          			<input type="text" name="diengiai" th:field="*{dienGiai}"/>
                          		</td>
                          	<tr>
                          		<td>
                          			<label for="mancc">Người phụ trách:</label>
                          		</td>     
                          		<td>
                          			<input type="text" name="nguoiphutrach" th:field="*{nguoiPhuTrach}"/>
                          		</td>
                          	</tr>
                          </table>
                        </div>
                        <div id="tab_phieuxuat" class="tab-pane fade in active">
                        	<table>
                        		<tr>
	                          		<td>
	                          			<label for="makh">Mã khách hàng:</label>
	                          		</td>
	                          		<td>
	                          			<input type="text" name="makh" th:field="*{phieuXuatKho.maDoiTuong}"/>
	                          		</td>
	                          	</tr>
	                          	<tr>
	                          		<td>
	                          			<label for="tenkh">Tên khách hàng:</label>
	                          		</td>
	                          		<td>
	                          			<input type="text" name="tenkh" th:field="*{phieuXuatKho.tenDoiTuong}"/>
	                          		</td>
	                          	</tr>
	                          	<tr>
	                          		<td>
	                          			<label for="diaChi">Địa chỉ:</label>
	                          		</td>
	                          		<td>
	                          			<input type="text" name="diaChi" th:field="*{phieuXuatKho.diaChi}"/>
	                          		</td>
                          		</tr>
                        		<tr>
                        			<td>
                        				<label for="nguoigiao">Người giao hàng:</label>
                        			</td>
                        			<td>
                        				<input type="text" name="nguoigiao" th:field="*{phieuXuatKho.nguoiGiaoHang}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>
                        				<label for="diengiai">Diễn giải:</label>
                        			</td>
                        			<td>
                        				<input type="text" name="nguoigiao" th:field="*{phieuXuatKho.dienGiai}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>
                        				<label for="mancc">Người phụ trách:</label>
                        			</td>
                        			<td>
                        				 <input type="text" name="nguoiphutrach" th:field="*{phieuXuatKho.nguoiPhuTrach}"/>
                        			</td>
                        		</tr>
                        	</table>
                        </div>
                        <div id="tab_phieuthu" class="tab-pane fade">   
                        	<table th:each="phieuThu, itemStat:*{phieuThu}">
                        		<tr>
                        			<td>  
                        				<label for="mancc">Mã khách hàng:</label>                   				
                        			</td>
                        			<td>
                        				<input type="text" name="mancc" th:field="*{phieuThu[__${itemStat.index}__].maDoiTuong}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>    
                        				<label for="tenncc">Tên khách hàng:</label>                  				
                        			</td>
                        			<td>
                        				 <input type="text" name="tenncc" th:field="*{phieuThu[__${itemStat.index}__].tenDoiTuong}"/> 
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>   
                        				<label for="diachi">Địa chỉ:</label>                  				
                        			</td>
                        			<td>
                        				<input type="text" name="diachi" th:field="*{phieuThu[__${itemStat.index}__].diaChi}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>   
                        				<label for="sotien">Số tiền:</label>                  				
                        			</td>
                        			<td>
                        				<input type="text" name="sotien" th:field="*{phieuThu[__${itemStat.index}__].soTien}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>   
                        				<label for="lido">Diễn giải:</label>                  				
                        			</td>
                        			<td>
                        				<input type="text" name="lido" th:field="*{phieuThu[__${itemStat.index}__].dienGiai}"/>
                        			</td>
                        		</tr>
                        	</table>
                        </div>
                        <div id="tab_hoadon" class="tab-pane fade">    
                        	<table>
                        		<tr>
	                          		<td>
	                          			<label for="makh">Mã khách hàng:</label>
	                          		</td>
	                          		<td>
	                          			<input type="text" name="makh" th:field="*{hoaDonBan.maDoiTuong}"/>
	                          		</td>
	                          	</tr>
	                          	<tr>
	                          		<td>
	                          			<label for="tenkh">Tên khách hàng:</label>
	                          		</td>
	                          		<td>
	                          			<input type="text" name="tenkh" th:field="*{hoaDonBan.tenDoiTuong}"/>
	                          		</td>
	                          	</tr>
                        		<tr>
                        			<td>  
                        				<label for="diachi">Địa chỉ:</label>                   				
                        			</td>
                        			<td>
                        				<input type="text" name="diachi" th:field="*{hoaDonBan.diaChi}"/>
                        			</td>
                        		</tr>
                        		<tr>
                        			<td>  
                        				<label for="masothue">Mã số thuế:</label>                   				
                        			</td>
                        			<td>
                        				<input type="text" name="masothue" th:field="*{hoaDonBan.maSoThue}"/> 
                        			</td>
                        		</tr>
                        	</table>                 
                        </div>
                      </div>
                    </div>
                    <div class="col-sm-5" id="form_chungtu" style="margin-top: 40px;">
                        <div id="f_chungtu">
                          <h3>Chứng từ</h3>
                          <table>
                            <tr>
                              <td>
                                <label for="ngayhachtoan">Ngày hạch toán:</label>
                              </td>
                              <td><input type="date" name="ngayhachtoan" th:field="*{ngayHachToan}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="ngaychungtu">Ngày chứng từ:</label>
                              </td>
                              <td><input type="date" name="ngaychungtu" th:field="*{ngayChungTu}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="sochungtu">Số chứng từ:</label>
                              </td>
                              <td><input type="text" name="sochungtu" th:field="*{soChungTu}"> </td>
                            </tr>
                          </table>          
                        </div>
                        <div id="f_phieuthu" style="display: none;">
                          <h3>Chứng từ</h3>                        
                          <table th:each="phieuchi, itemStat:*{phieuThu}">
                            <tr>
                              <td>
                                <label for="ngayhachtoan">Ngày hạch toán:</label>
                              </td>
                              <td><input type="date" name="ngayhachtoan" th:field="*{phieuThu[__${itemStat.index}__].ngayHachToan}"/> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="ngaychungtu">Ngày chứng từ:</label>
                              </td>
                              <td><input type="date" name="ngaychungtu" th:field="*{phieuThu[__${itemStat.index}__].ngayChungTu}"/> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="sophieuchi">Số phiếu thu:</label>
                              </td>
                              <td><input type="text" name="sophieuchi" th:field="*{phieuThu[__${itemStat.index}__].soPhieuThu}" > </td>
                            </tr>
                          </table>         
                        </div>
                        <div id="f_phieuxuat" style="display: none;">
                          <h3>Chứng từ</h3>
                          <table>
                            <tr>
                              <td>
                                <label for="ngayhachtoan">Ngày hạch toán:</label>
                              </td>
                              <td><input type="date" name="ngayhachtoan" th:field="*{phieuXuatKho.ngayHachToan}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="ngaychungtu">Ngày chứng từ:</label>
                              </td>
                              <td><input type="date" name="ngaychungtu" th:field="*{phieuXuatKho.ngayChungTu}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="sophieuxuat">Số phiếu xuất:</label>
                              </td>
                              <td><input type="text" name="sophieuxuat" th:field="*{phieuXuatKho.soPhieuXuat}"> </td>
                            </tr>
                          </table>          
                        </div>
                        <div id="f_hoadon" style="display: none;">
                          <h3>Hóa đơn</h3>
                          <table>
                            <tr>
                              <td>
                                <label for="masoHD">Mẫu số HĐ:</label>
                              </td>
                              <td><input type="text" name="mausoHD" th:field="*{hoaDonBan.mauSoHoaDon}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="kihieuHD">Kí hiệu HĐ:</label>
                              </td>
                              <td><input type="text" name="kihieuHD" th:field="*{hoaDonBan.kiHieuHoaDon}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="sohoadon">Số hóa đơn:</label>
                              </td>
                              <td><input type="text" name="sohoadon" th:field="*{hoaDonBan.soHoaDon}"> </td>
                            </tr>
                            <tr>
                              <td>
                                <label for="ngayhoadon">Ngày hóa đơn:</label>
                              </td>
                              <td><input type="date" name="ngayhoadon" th:field="*{hoaDonBan.ngayHoaDon}"> </td>
                            </tr>                         
                          </table> 
                        </div>
                      </div>
                  </div>
                <div class="row t4">
                    <div id="dongia">
                      <label for="dongia">Đơn giá:</label>
                      <input type="text" name="dongia" value="1000" disabled/>
                    </div>
                    <div id="tygia">
                      <label for="tygia">Tỷ giá:</label>
                      <input type="text" name="tygia" value="VND" disabled/>
                    </div>
                </div>
                <div>
                	<div th:if="${message}" style="font-size:16px;color:red;">
					    <div th:text="${message}"></div>
					</div>
                </div>
                <div class="row t5">
                  <h3>Chi tiết</h3>
                  <table id="chitiet">
                    <tr>
                      <th>Mã hàng</th>
                      <th>Tên hàng</th>
                      <th>Số lượng</th>
                      <th>Đơn vị tính</th>
                      <th>Đơn giá</th>
                      <th>Chiết khấu(%)</th>
                      <th>Thuế GTGT(%)</th>
                      <th>Thành tiền</th>
                    </tr>
                    <tr th:each="chiTietPhieu, itemStat : *{chiTietPhieuBan}">
                      <td>
                        <input type="text" name="mahang" th:field="*{chiTietPhieuBan[__${itemStat.index}__].maHang}"/>                     
                      </td>  
                      <td>
                        <input type="text" name="tenhang" th:field="*{chiTietPhieuBan[__${itemStat.index}__].tenHang}"/>                     
                      </td> 
                      <td>
                        <input type="number" name="soluong" id="soluong" th:field="*{chiTietPhieuBan[__${itemStat.index}__].soLuong}" oninput="tongtien2()"/>                     
                      </td> 
                      <td>
                        <input type="text" name="DVT" th:field="*{chiTietPhieuBan[__${itemStat.index}__].donViTinh}"/>                     
                      </td> 
                      <td>
                        <input type="text" name="gia" id="gia" oninput="tongtien2()" th:field="*{chiTietPhieuBan[__${itemStat.index}__].gia}"/>                     
                      </td> 
                      <td>
                        <input type="text" name="chietkhau" id="chietkhau" oninput="tongtien2()" th:field="*{chiTietPhieuBan[__${itemStat.index}__].chietkhau}"/>                     
                      </td> 
                      <td>
                        <input type="text" name="GTGT" id="GTGT" oninput="tongtien2()" th:field="*{chiTietPhieuBan[__${itemStat.index}__].VAT}"/>                     
                      </td> 
                      <td>
                        <input type="text" name="thanhtien" id="thanhtien" oninput="tongtien2()" th:field="*{chiTietPhieuBan[__${itemStat.index}__].thanhTien}"/>                     
                      </td>                
                    </tr>                                     
                  </table>
                </div>
                <div class="row t6">
                  <table id="tinhtong">
                  	<tr>
                      <td> <label for="tienhang">Tiền hàng:</label></td>
                      <td><input type="text" name="tienhang" id="tienhang" oninput="tongtien2()" th:field="*{tongHang}"/></td>
                      <td> <label for="GTGT">Tổng thuế GTGT:</label></td>
                      <td><input type="text" name="GTGT" id="tongGTGT" oninput="tongtien2()" th:field="*{tongGTGT}"/></td>
                    </tr>
                    <tr>
                      <td> <label for="chietkhau">Tổng chiết khấu:</label></td>
                      <td><input type="text" name="chietkhau" id="tongchietkhau" oninput="tongtien2()" th:field="*{tongChietKhau}"/></td>
                      <td> <label for="tienship">Tiền vận chuyển:</label></td>
                      <td><input type="text" name="tienship" id="tienship" oninput="tongtien2()" th:field="*{tienShip}"/></td>
                    </tr>
                    <tr>
                      <td></td>
                      <td></td>
                      <td> <label for="tongtien">Tổng tiền:</label></td>
                      <td><input type="text" name="tongtien" id="tongtien" oninput="tongtien2()" th:field="*{tongTien}"/></td>
                    </tr>
                  </table>                
                </div>
                <div class="row t7">      
                    <button class="btn btn-cancel">Hủy bỏ</button> 
                	<button class="btn btn-save">Lưu lại</button>
                </div>
                </form>
	        </div>
	    </div>
	</div>
</body>
</html>